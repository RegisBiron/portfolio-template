function global(){if($(".nano").nanoScroller({preventPageScrolling:!0,iOSNativeScrolling:!0}),-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&$(".front-page").addClass("background"),Modernizr.touch?$("html").removeClass("no-touch"):$("html").addClass("no-touch"),!Modernizr.svg)for(var a=document.getElementsByTagName("img"),b=/.*\.svg$/,c=a.length,d=0;c>d;d++)a[d].src.match(b)&&(a[d].src=a[d].src.slice(0,-3)+"png",console.log(a[d].src))}function nextPrev(){$(".next").mouseover(function(){$("html").addClass("hover-next-project")}).mouseout(function(){$("html").removeClass("hover-next-project")}),$(".previous").mouseover(function(){$("html").addClass("hover-previous-project"),$("html").hasClass("fixed")?($("html").removeClass("hover-previous-project"),$(".previous").bind("click",!1)):$(".previous").unbind("click",!1)}).mouseout(function(){$("html").removeClass("hover-previous-project")})}function beLazy(){new Blazy({container:".image-wrapper",breakpoints:[{width:420,src:"data-src-small"},{width:768,src:"data-src-medium"},{width:1120,src:"data-src-large"}]})}function rotateTitle(){var a=$("#title a").data("titles")||0;$("#title a").data("titles",a==titles.length-1?0:a+1).html('Regis <span class="interests">'+titles[a]+"</span>").fadeIn().delay(5e3).fadeOut(500,rotateTitle)}function scrollLock(){$(document).on("touchmove",function(a){a.preventDefault(),$("html").hasClass("fixed")||$(document).unbind("touchmove")});var a=!1;$("body").on("touchstart",".scrollable",function(b){a||(a=!0,0===b.currentTarget.scrollTop?b.currentTarget.scrollTop=1:b.currentTarget.scrollHeight===b.currentTarget.scrollTop+b.currentTarget.offsetHeight&&(b.currentTarget.scrollTop-=1),a=!1)}),$("body").on("touchmove",".scrollable",function(a){a.stopPropagation()})}$(window).load(function(){beLazy()}),$(document).on("pjax:end",function(){beLazy(),nextPrev(),global()}),$(document).ready(function(){nextPrev(),global()});var titles=["is a designer","loves type","thinks less is more","follows function","ama burritos","plays with HTML/CSS","likes hedgehogs"];$(rotateTitle),$(".bar-menu").click(function(a){scrollLock(),$("html").hasClass("progress")?a.preventDefault():($("#project-menu").toggleClass("active"),$(".page-wrap, #menu, footer, .next, .previous").toggleClass("active"),setTimeout(function(){$(".bars").toggleClass("active")},250),-1!=navigator.userAgent.indexOf("Firefox")?setTimeout(function(){$("html").toggleClass("overflow")},400):$("html").toggleClass("overflow"),$("html").toggleClass("fixed"),$("html").hasClass("fixed")?($("html").removeClass("hover-previous-project"),$(".projects a").bind("click",!1)):$(".projects a").unbind("click",!1))}),$(document).on("pjax:timeout",function(a){a.preventDefault()}),$(document).on("pjax:success",function(){ga("send","pageview")}),$(document).on("click","a[data-pjax]",function(a){if(a.preventDefault(),a.metaKey||a.ctrlKey)return window.open(this.href),!1;var b=$(this).attr("href");$("html").addClass("progress"),$("#title a").addClass("loading"),$("#loader").delay(300).fadeIn(300),setTimeout(function(){$(".bars").removeClass("active")},250),$(".page-wrap, header, footer, .next, .previous").removeClass("active"),$("html").removeClass("fixed"),$("html").removeClass("overflow"),$("#project-menu").hasClass("active")?$(".fade").delay(600).animate({opacity:0},400,function(){$.pjax({url:b,container:".load-container",fragment:".load-container",timeout:5e3})}):$(".fade").animate({opacity:0},400,function(){$.pjax({url:b,container:".load-container",fragment:".load-container",timeout:5e3})}),$("#project-menu").removeClass("active")}),$(document).on("pjax:end",function(){$(".fade").css("opacity","0"),$(".fade").delay(400).animate({opacity:1},400),$("html").removeClass("progress hover-next-project hover-previous-project"),$("#title a").removeClass("loading")}),$(document).keydown(function(a){if($(".load-container").length)switch(a.keyCode){case 39:$("#next-project-arrow").trigger("click",!0);break;case 37:$("#previous-project-arrow").trigger("click",!0)}});